{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useUnityLoader = void 0;\nvar react_1 = require(\"react\");\nvar is_browser_environment_1 = require(\"../constants/is-browser-environment\");\n/**\n * Hook to embed a Unity Loader script.\n * @param source The source of the unity loader.\n * @returns a hook that returns the status of the loader.\n */\nvar useUnityLoader = function (loaderUrl) {\n  var _a = (0, react_1.useState)(\"Loading\"),\n    status = _a[0],\n    setStatus = _a[1];\n  // Effect hook will be invoked when the source changes.\n  (0, react_1.useEffect)(function () {\n    // It is possible for the application being rendered server side. In\n    // this scenario, the window is not available. We can't create a Unity\n    // Loader in this case.\n    if (is_browser_environment_1.isBrowserEnvironment === false) {\n      return undefined;\n    }\n    // If the script's source is null, we'll reset the status to idle.\n    if (loaderUrl === null) {\n      setStatus(\"Idle\");\n      return undefined;\n    }\n    /**\n     * Find existing script element by source. It may have been added by\n     * another instance of this hook.\n     */\n    var script = window.document.querySelector(\"script[src=\\\"\".concat(loaderUrl, \"\\\"]\"));\n    // If there wan't another instance of this script, we're going to create a\n    // new one with the provided source.\n    if (script === null) {\n      script = window.document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = loaderUrl;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\");\n      // Add script to window.document body.\n      window.document.body.appendChild(script);\n      // Store status in attribute on script. This can be read by other\n      // instances of this hook.\n      script.addEventListener(\"load\", function () {\n        return script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", \"loaded\");\n      });\n      script.addEventListener(\"error\", function () {\n        return script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", \"error\");\n      });\n    } else {\n      // If there already was a script with the same source, grab its existing\n      // script status from attribute and set to state.\n      setStatus(script.getAttribute(\"data-status\") === \"loaded\" ? \"Loaded\" : \"Error\");\n    }\n    /**\n     * Script event handler to update status in state. Even if the script\n     * already exists we still need to add event handlers to update the state\n     * for this hook instance.\n     * @param event The event that was triggered.\n     */\n    var setStateFromEvent = function (event) {\n      return setStatus(event.type === \"load\" ? \"Loaded\" : \"Error\");\n    };\n    script.addEventListener(\"load\", setStateFromEvent);\n    script.addEventListener(\"error\", setStateFromEvent);\n    // Remove event listeners on cleanup.\n    return function () {\n      if (script !== null) {\n        script.removeEventListener(\"load\", setStateFromEvent);\n        script.removeEventListener(\"error\", setStateFromEvent);\n        script.remove();\n      }\n    };\n  }, [loaderUrl]);\n  return status;\n};\nexports.useUnityLoader = useUnityLoader;","map":{"version":3,"names":["Object","defineProperty","exports","value","useUnityLoader","react_1","require","is_browser_environment_1","loaderUrl","_a","useState","status","setStatus","useEffect","isBrowserEnvironment","undefined","script","window","document","querySelector","concat","createElement","type","src","async","setAttribute","body","appendChild","addEventListener","getAttribute","setStateFromEvent","event","removeEventListener","remove"],"sources":["/Users/hayashidareki/Documents/ポートフォリオ/react_unity/node_modules/react-unity-webgl/distribution/hooks/use-unity-loader.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useUnityLoader = void 0;\nvar react_1 = require(\"react\");\nvar is_browser_environment_1 = require(\"../constants/is-browser-environment\");\n/**\n * Hook to embed a Unity Loader script.\n * @param source The source of the unity loader.\n * @returns a hook that returns the status of the loader.\n */\nvar useUnityLoader = function (loaderUrl) {\n    var _a = (0, react_1.useState)(\"Loading\"), status = _a[0], setStatus = _a[1];\n    // Effect hook will be invoked when the source changes.\n    (0, react_1.useEffect)(function () {\n        // It is possible for the application being rendered server side. In\n        // this scenario, the window is not available. We can't create a Unity\n        // Loader in this case.\n        if (is_browser_environment_1.isBrowserEnvironment === false) {\n            return undefined;\n        }\n        // If the script's source is null, we'll reset the status to idle.\n        if (loaderUrl === null) {\n            setStatus(\"Idle\");\n            return undefined;\n        }\n        /**\n         * Find existing script element by source. It may have been added by\n         * another instance of this hook.\n         */\n        var script = window.document.querySelector(\"script[src=\\\"\".concat(loaderUrl, \"\\\"]\"));\n        // If there wan't another instance of this script, we're going to create a\n        // new one with the provided source.\n        if (script === null) {\n            script = window.document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = loaderUrl;\n            script.async = true;\n            script.setAttribute(\"data-status\", \"loading\");\n            // Add script to window.document body.\n            window.document.body.appendChild(script);\n            // Store status in attribute on script. This can be read by other\n            // instances of this hook.\n            script.addEventListener(\"load\", function () {\n                return script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", \"loaded\");\n            });\n            script.addEventListener(\"error\", function () {\n                return script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", \"error\");\n            });\n        }\n        else {\n            // If there already was a script with the same source, grab its existing\n            // script status from attribute and set to state.\n            setStatus(script.getAttribute(\"data-status\") === \"loaded\" ? \"Loaded\" : \"Error\");\n        }\n        /**\n         * Script event handler to update status in state. Even if the script\n         * already exists we still need to add event handlers to update the state\n         * for this hook instance.\n         * @param event The event that was triggered.\n         */\n        var setStateFromEvent = function (event) {\n            return setStatus(event.type === \"load\" ? \"Loaded\" : \"Error\");\n        };\n        script.addEventListener(\"load\", setStateFromEvent);\n        script.addEventListener(\"error\", setStateFromEvent);\n        // Remove event listeners on cleanup.\n        return function () {\n            if (script !== null) {\n                script.removeEventListener(\"load\", setStateFromEvent);\n                script.removeEventListener(\"error\", setStateFromEvent);\n                script.remove();\n            }\n        };\n    }, [loaderUrl]);\n    return status;\n};\nexports.useUnityLoader = useUnityLoader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}