{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useUnityContext = void 0;\nvar react_1 = require(\"react\");\nvar use_event_system_1 = require(\"./use-event-system\");\n/**\n * Custom hook to create a Unity context.\n * This hook initializes the Unity instance and provides the necessary state and methods.\n * @param unityConfig - Configuration object for the Unity instance.\n * @returns An object containing the Unity context state and methods.\n */\nvar useUnityContext = function (unityConfig) {\n  var _a = (0, react_1.useState)(null),\n    unityInstance = _a[0],\n    setUnityInstance = _a[1];\n  var _b = (0, react_1.useState)(0),\n    loadingProgression = _b[0],\n    setLoadingProgression = _b[1];\n  var _c = (0, react_1.useState)(false),\n    isLoaded = _c[0],\n    setIsLoaded = _c[1];\n  var _d = (0, react_1.useState)(),\n    initialisationError = _d[0],\n    setInitialisationError = _d[1];\n  // Use the event system hook to manage external React Unity events.\n  // This hook provides methods to add and remove event listeners for Unity events.\n  // It returns an object with the methods addEventListener and removeEventListener.\n  var eventSystem = (0, use_event_system_1.useEventSystem)();\n  // Create a ref to hold the UnityProvider instance, it consists of a selection\n  // of properties from the UnityConfig and methods to interact with the Unity instance.\n  // This allows us to avoid unnecessary re-renders when the UnityProvider is updated.\n  // The useRef hook is used to persist the UnityProvider instance across renders.\n  var unityProvider = (0, react_1.useRef)({\n    companyName: unityConfig.companyName,\n    productName: unityConfig.productName,\n    productVersion: unityConfig.productVersion,\n    codeUrl: unityConfig.codeUrl,\n    dataUrl: unityConfig.dataUrl,\n    frameworkUrl: unityConfig.frameworkUrl,\n    loaderUrl: unityConfig.loaderUrl,\n    memoryUrl: unityConfig.memoryUrl,\n    symbolsUrl: unityConfig.symbolsUrl,\n    streamingAssetsUrl: unityConfig.streamingAssetsUrl,\n    workerUrl: unityConfig.workerUrl,\n    webglContextAttributes: unityConfig.webglContextAttributes,\n    cacheControl: unityConfig.cacheControl,\n    autoSyncPersistentDataPath: unityConfig.autoSyncPersistentDataPath,\n    setUnityInstance: setUnityInstance,\n    setLoadingProgression: setLoadingProgression,\n    setIsLoaded: setIsLoaded,\n    setInitialisationError: setInitialisationError\n  });\n  /**\n   * Requests the Unity Instance to enter or exit fullscreen mode.\n   */\n  var requestFullscreen = (0, react_1.useCallback)(function (enabled) {\n    return unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.SetFullscreen(enabled ? 1 : 0);\n  }, [unityInstance]);\n  /**\n   * Requests the Unity Instance to enter pointer lock mode.\n   * Pointer lock mode allows the Unity Instance to capture mouse movements\n   * without the cursor leaving the Unity canvas.\n   */\n  var requestPointerLock = (0, react_1.useCallback)(function () {\n    var _a;\n    (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Module.canvas) === null || _a === void 0 ? void 0 : _a.requestPointerLock();\n  }, [unityInstance]);\n  /**\n   * Sends a message to the Unity Instance to invoke a public method.\n   */\n  var sendMessage = (0, react_1.useCallback)(function (gameObjectName, methodName, parameter) {\n    return unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.SendMessage(gameObjectName, methodName, parameter);\n  }, [unityInstance]);\n  /**\n   * Takes a screenshot of the Unity Instance and returns a base64 encoded\n   * string.\n   * @param dataType Defines the type of screenshot to take.\n   * @param quality Defines the quality of the screenshot.\n   * @returns A base 64 encoded string of the screenshot.\n   */\n  var takeScreenshot = (0, react_1.useCallback)(function (dataType, quality) {\n    var _a;\n    return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Module.canvas) === null || _a === void 0 ? void 0 : _a.toDataURL(dataType, quality);\n  }, [unityInstance]);\n  /**\n   * Unloads the Unity Instance and cleans up resources.\n   */\n  var unload = (0, react_1.useCallback)(function () {\n    var _a;\n    return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Quit()) !== null && _a !== void 0 ? _a : Promise.reject();\n  }, [unityInstance]);\n  /**\n   * Gets the metrics information from the Unity Instance.\n   * This includes performance metrics such as FPS, memory usage, etc.\n   * @returns A function that returns the metrics information.\n   */\n  var getMetricsInfo = (0, react_1.useCallback)(function () {\n    var _a;\n    return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.GetMetricsInfo) === null || _a === void 0 ? void 0 : _a.call(unityInstance);\n  }, [unityInstance]);\n  // Initialize the UnityProvider with the provided configuration\n  // This is where you would typically load the Unity instance\n  // and set up event listeners, etc.\n  return {\n    unityProvider: unityProvider.current,\n    loadingProgression: loadingProgression,\n    isLoaded: isLoaded,\n    initialisationError: initialisationError,\n    requestFullscreen: requestFullscreen,\n    requestPointerLock: requestPointerLock,\n    sendMessage: sendMessage,\n    takeScreenshot: takeScreenshot,\n    unload: unload,\n    getMetricsInfo: getMetricsInfo,\n    addEventListener: eventSystem.addEventListener,\n    removeEventListener: eventSystem.removeEventListener,\n    UNSAFE__unityInstance: unityInstance\n  };\n};\nexports.useUnityContext = useUnityContext;","map":{"version":3,"names":["Object","defineProperty","exports","value","useUnityContext","react_1","require","use_event_system_1","unityConfig","_a","useState","unityInstance","setUnityInstance","_b","loadingProgression","setLoadingProgression","_c","isLoaded","setIsLoaded","_d","initialisationError","setInitialisationError","eventSystem","useEventSystem","unityProvider","useRef","companyName","productName","productVersion","codeUrl","dataUrl","frameworkUrl","loaderUrl","memoryUrl","symbolsUrl","streamingAssetsUrl","workerUrl","webglContextAttributes","cacheControl","autoSyncPersistentDataPath","requestFullscreen","useCallback","enabled","SetFullscreen","requestPointerLock","Module","canvas","sendMessage","gameObjectName","methodName","parameter","SendMessage","takeScreenshot","dataType","quality","toDataURL","unload","Quit","Promise","reject","getMetricsInfo","GetMetricsInfo","call","current","addEventListener","removeEventListener","UNSAFE__unityInstance"],"sources":["/Users/hayashidareki/Documents/ポートフォリオ/react_unity/node_modules/react-unity-webgl/distribution/hooks/use-unity-context.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useUnityContext = void 0;\nvar react_1 = require(\"react\");\nvar use_event_system_1 = require(\"./use-event-system\");\n/**\n * Custom hook to create a Unity context.\n * This hook initializes the Unity instance and provides the necessary state and methods.\n * @param unityConfig - Configuration object for the Unity instance.\n * @returns An object containing the Unity context state and methods.\n */\nvar useUnityContext = function (unityConfig) {\n    var _a = (0, react_1.useState)(null), unityInstance = _a[0], setUnityInstance = _a[1];\n    var _b = (0, react_1.useState)(0), loadingProgression = _b[0], setLoadingProgression = _b[1];\n    var _c = (0, react_1.useState)(false), isLoaded = _c[0], setIsLoaded = _c[1];\n    var _d = (0, react_1.useState)(), initialisationError = _d[0], setInitialisationError = _d[1];\n    // Use the event system hook to manage external React Unity events.\n    // This hook provides methods to add and remove event listeners for Unity events.\n    // It returns an object with the methods addEventListener and removeEventListener.\n    var eventSystem = (0, use_event_system_1.useEventSystem)();\n    // Create a ref to hold the UnityProvider instance, it consists of a selection\n    // of properties from the UnityConfig and methods to interact with the Unity instance.\n    // This allows us to avoid unnecessary re-renders when the UnityProvider is updated.\n    // The useRef hook is used to persist the UnityProvider instance across renders.\n    var unityProvider = (0, react_1.useRef)({\n        companyName: unityConfig.companyName,\n        productName: unityConfig.productName,\n        productVersion: unityConfig.productVersion,\n        codeUrl: unityConfig.codeUrl,\n        dataUrl: unityConfig.dataUrl,\n        frameworkUrl: unityConfig.frameworkUrl,\n        loaderUrl: unityConfig.loaderUrl,\n        memoryUrl: unityConfig.memoryUrl,\n        symbolsUrl: unityConfig.symbolsUrl,\n        streamingAssetsUrl: unityConfig.streamingAssetsUrl,\n        workerUrl: unityConfig.workerUrl,\n        webglContextAttributes: unityConfig.webglContextAttributes,\n        cacheControl: unityConfig.cacheControl,\n        autoSyncPersistentDataPath: unityConfig.autoSyncPersistentDataPath,\n        setUnityInstance: setUnityInstance,\n        setLoadingProgression: setLoadingProgression,\n        setIsLoaded: setIsLoaded,\n        setInitialisationError: setInitialisationError,\n    });\n    /**\n     * Requests the Unity Instance to enter or exit fullscreen mode.\n     */\n    var requestFullscreen = (0, react_1.useCallback)(function (enabled) { return unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.SetFullscreen(enabled ? 1 : 0); }, [unityInstance]);\n    /**\n     * Requests the Unity Instance to enter pointer lock mode.\n     * Pointer lock mode allows the Unity Instance to capture mouse movements\n     * without the cursor leaving the Unity canvas.\n     */\n    var requestPointerLock = (0, react_1.useCallback)(function () {\n        var _a;\n        (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Module.canvas) === null || _a === void 0 ? void 0 : _a.requestPointerLock();\n    }, [unityInstance]);\n    /**\n     * Sends a message to the Unity Instance to invoke a public method.\n     */\n    var sendMessage = (0, react_1.useCallback)(function (gameObjectName, methodName, parameter) { return unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.SendMessage(gameObjectName, methodName, parameter); }, [unityInstance]);\n    /**\n     * Takes a screenshot of the Unity Instance and returns a base64 encoded\n     * string.\n     * @param dataType Defines the type of screenshot to take.\n     * @param quality Defines the quality of the screenshot.\n     * @returns A base 64 encoded string of the screenshot.\n     */\n    var takeScreenshot = (0, react_1.useCallback)(function (dataType, quality) { var _a; return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Module.canvas) === null || _a === void 0 ? void 0 : _a.toDataURL(dataType, quality); }, [unityInstance]);\n    /**\n     * Unloads the Unity Instance and cleans up resources.\n     */\n    var unload = (0, react_1.useCallback)(function () { var _a; return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.Quit()) !== null && _a !== void 0 ? _a : Promise.reject(); }, [unityInstance]);\n    /**\n     * Gets the metrics information from the Unity Instance.\n     * This includes performance metrics such as FPS, memory usage, etc.\n     * @returns A function that returns the metrics information.\n     */\n    var getMetricsInfo = (0, react_1.useCallback)(function () { var _a; return (_a = unityInstance === null || unityInstance === void 0 ? void 0 : unityInstance.GetMetricsInfo) === null || _a === void 0 ? void 0 : _a.call(unityInstance); }, [unityInstance]);\n    // Initialize the UnityProvider with the provided configuration\n    // This is where you would typically load the Unity instance\n    // and set up event listeners, etc.\n    return {\n        unityProvider: unityProvider.current,\n        loadingProgression: loadingProgression,\n        isLoaded: isLoaded,\n        initialisationError: initialisationError,\n        requestFullscreen: requestFullscreen,\n        requestPointerLock: requestPointerLock,\n        sendMessage: sendMessage,\n        takeScreenshot: takeScreenshot,\n        unload: unload,\n        getMetricsInfo: getMetricsInfo,\n        addEventListener: eventSystem.addEventListener,\n        removeEventListener: eventSystem.removeEventListener,\n        UNSAFE__unityInstance: unityInstance,\n    };\n};\nexports.useUnityContext = useUnityContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}